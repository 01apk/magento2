<?php
/**
 * Copyright © 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */
?>
<div class="step-controls">
    <a href="" class="btn btn-primary" ng-click="previousState()">Previous</a>
    <a href="" class="btn btn-primary" ng-click="checkModuleConstraints()">Next</a>
</div>

<div class="page-header">
    <h1>{{$state.current.header}}</h1>
</div>

<form novalidate name="customizeStore" class="form-horizontal" role="form">
<form class="form-horizontal" role="form">
    <div class="form-group">
        <label class="col-md-3 control-label">Sample Data</label>
        <div class="col-md-6">
            <p class="form-control-static text-muted">
                Select “Use Sample Data" to create a sample store with sample products, customers, and payment settings. Our <a target="_blank" href="http://devdocs.magento.com/guides/v1.0/install-gde/install/sample-data.html">Guide to Using Sample Data</a> can help you get started.</p>
        </div>
    </div>

    <div class="form-group">
        <div class="checkbox col-md-4 col-md-offset-3">
            <label>
                <input type="checkbox" ng-model="store.useSampleData" <?php echo $this->isSampledataEnabled ? '' : 'disabled' ?>>&nbsp;<span class="text-muted">Use Sample Data</span>
            </label>
        </div>
    </div>

    <div class="form-group">
        <label class="col-md-3 control-label">Store Default Time Zone&nbsp;<span class="required">*</span></label>
        <div class="col-md-6">
            <select class="form-control"
                    ng-model="store.timezone"
                    tooltip-placement="right"
                    tooltip-html-unsafe="The time zone in which your online store operates. You can change this later in Magento Admin."
                    tooltip-trigger="focus"
                    tooltip-append-to-body="true">
            <?php foreach ($this->timezone as $value => $label): ?>
                <?php echo "<option value=\"" . $value . "\">" . $label . "</option>"; ?>
            <?php endforeach; ?>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="col-md-3 control-label">Store Default Currency&nbsp;<span class="required">*</span></label>
        <div class="col-md-5">
            <select class="form-control"
                    ng-model="store.currency"
                    tooltip-placement="right"
                    tooltip-html-unsafe="The currency your store uses for price labeling, checkout, returns, credit and gift cards. You can change this later in Magento Admin."
                    tooltip-trigger="focus"
                    tooltip-append-to-body="true">
            <?php foreach ($this->currency as $value => $label): ?>
                <?php echo "<option value=\"" . $value . "\">" . $label . "</option>"; ?>
            <?php endforeach; ?>
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-md-3 control-label">Store Default Language&nbsp;<span class="required">*</span></label>
        <div class="col-md-4">
            <select class="form-control"
                    ng-model="store.language"
                    tooltip-placement="right"
                    tooltip-html-unsafe="The language customers will see in your store. You can change this later in Magento Set Up Tool."
                    tooltip-trigger="focus"
                    tooltip-append-to-body="true">
            <?php foreach ($this->language as $value => $label): ?>
                <?php echo "<option value=\"" . $value . "\">" . $label . "</option>"; ?>
            <?php endforeach; ?>
            </select>
        </div>
    </div>
    <div ng-show="corruptConfig !== undefined"
         class="error-container animate-show text-danger glyphicon glyphicon-remove-sign" ng-bind-html="corruptConfig">
    </div>
    <div ng-show="corruptConfig !== undefined" class="error-container">
        <input type="checkbox"
               ng-model="store.force"
               ng-click="toggleForce()">&nbsp; Allow force enable/disable of modules
    </div>
    <div class="collapsed-options">
        <a href="#" class="collapsed-options" ng-click="updateOnExpand(store.advanced)">Advanced Modules Configurations</a>
        <span class="caret"></span>
    </div>
    <div ng-show="store.advanced.expanded">
        <div class="form-group">
            <input type="checkbox"
               ng-model="store.selectAll"
               ng-click="toggleAllModules()">&nbsp;Select All
        </div>
        <div class="form-group multiSelect">
            <label class="col-md-7 uncheckedClass" ng-repeat="module in store.allModules"  ng-class="{'disabledClass': (store.disabledModules.indexOf(module) > -1) && (store.selectedModules.indexOf(module) > -1), 'checkedClass':  (store.selectedModules.indexOf(module) > -1)}">
                <input class="moduleCheckbox" type="checkbox" ng-click="toggleModule(module)" ng-disabled="store.disabledModules.indexOf(module) > -1"  ng-checked="store.selectedModules.indexOf(module) > -1" name="{{module}}"> {{module}}<br/>
            </label>
        </div>
        <div class="form-group">
            {{store.selectedModules.length}} out of {{store.allModules.length}} selected.
        </div>
        <div class="col-sm-8" ng-show="loading"><p style="color:blue">Validating Constraints for enabling/disabling modules...<img src="pub/images/ajax-loader.gif"/></div>
        <div class="form-group">
            <div  class="col-sm-10">
                <div ng-show="checkModuleConstraints.result.success === false && checkModuleConstraints.result !== undefined" class="error-container animate-show text-danger glyphicon glyphicon-remove-sign" ng-bind-html="checkModuleConstraints.result.error">
                </div>
            </div>
        </div>
    </div>
</form>
<div class="step-controls">
    <a href="" class="btn btn-primary" ng-click="previousState()">Previous</a>
    <a href="" class="btn btn-primary" ng-click="checkModuleConstraints()">Next</a>
</div>

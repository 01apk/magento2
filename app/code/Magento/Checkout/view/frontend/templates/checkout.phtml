<?php
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */
?>

<div class="opc-wrapper">
    <ol class="opc" id="checkout" data-bind="scope:'checkout'">
        <!-- ko template: getTemplate() --><!-- /ko -->
        <script type="text/x-magento-init">
            {
                "#checkout": {
                    "Magento_Ui/js/core/app": <?php echo $this->getJsLayout();?>
                }
            }
        </script>
        <script>
            window.customerData = <?php echo $this->getCustomerData(); ?>;
            window.cartData = <?php echo $this->getCart(); ?>;
            window.cartItems = <?php echo $this->getCartItems(); ?>;
            window.isLoggedIn = <?php echo $this->isCustomerLoggedIn() ? 'true' : 'false' ?>;
            window.currencySymbol = <?php echo $this->getCurrencySymbol()?>;
            window.selectedShippingMethod = <?php echo $this->getSelectedShippingMethod()?>;
            window.storeCode = <?php echo $this->getStoreCode()?>;
            window.isAllowedGuestCheckout = <?php echo $this->isAllowedGuestCheckout()?>;
            window.isRegistrationAllowed = <?php echo $this->isRegistrationAllowed()?>;
            window.isMethodRegister = <?php echo $this->isMethodRegister()?>;
            window.isCustomerMustBeLogged = <?php echo $this->isCustomerMustBeLogged()?>;
            window.getRegisterUrl = <?php echo $this->getRegisterUrl()?>;
            window.customerHasAddresses = <?php echo $this->customerHasAddresses()?>;
        </script>
        <script>
            require(['mage/url', 'Magento_Checkout/js/model/step-loader'], function(url, loader) {
                loader.registerLoader();
                return url.setBaseUrl('<?php echo $this->getBaseUrl();?>');
            })
        </script>
    </ol>
</div>

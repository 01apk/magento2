<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
    <table name="magento_login_as_customer_log" resource="default" engine="innodb" comment="Login as Customer Logging">
        <column xsi:type="int" name="log_id" padding="11" unsigned="false" nullable="false" identity="true" comment="Log Id"/>
        <column xsi:type="bigint" name="ip" padding="20" unsigned="false" nullable="false" identity="false" default="0" comment="Ip address"/>
        <column xsi:type="bigint" name="x_forwarded_ip" padding="20" unsigned="false" nullable="false" identity="false" default="0" comment="Real ip address if visitor used proxy"/>
        <column xsi:type="varchar" name="event_code" nullable="true" length="100" comment="Event Code"/>
        <column xsi:type="timestamp" name="time" on_update="false" nullable="true" comment="Even date"/>
        <column xsi:type="varchar" name="action" nullable="true" length="20" comment="Event action"/>
        <column xsi:type="text" name="info" nullable="true"/>
        <column xsi:type="varchar" name="status" nullable="true" length="15" comment="Status"/>
        <column xsi:type="varchar" name="user" nullable="true" length="40" comment="User name"/>
        <column xsi:type="int" name="user_id" padding="10" unsigned="true" nullable="true" identity="false" comment="User Id"/>
        <column xsi:type="int" name="customer_id" padding="10" unsigned="true" nullable="true" identity="false" comment="Customer Id"/>
        <column xsi:type="varchar" name="fullaction" nullable="true" length="200" comment="Full action description"/>
        <column xsi:type="text" name="error_message" nullable="true" comment="Error Message"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="log_id"/>
        </constraint>
        <constraint xsi:type="foreign" referenceId="MAGENTO_LOGIN_AS_CUSTOMER_LOG_USER_ID_ADMIN_USER_USER_ID" table="magento_login_as_customer_log" column="user_id" referenceTable="admin_user" referenceColumn="user_id" onDelete="SET NULL"/>
    </table>
</schema>

<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

/** @var \Magento\Translation\ViewModel\Dictionary $viewModel */
$viewModel = $block->getData('dictionary_view_model');
if (!$viewModel->isAppStateProduction()) {
    $dictionary = json_encode($viewModel->getTranslationDictionary(), JSON_HEX_APOS | JSON_UNESCAPED_SLASHES);
    // Use of JSON.parse below is intentional as JSON is significantly faster to parse than JavaScript
    ?>
    <script>
        define('mageTranslationDictionary', function () {
            var dict = <?= /* @noEscape */ $dictionary ?>;
            return JSON.parse(dict);
        });
    </script>
    <?php
} else {
    ?>
    <script>
        define('mageTranslationDictionary', ['text!<?= $viewModel->escapeUrl($viewModel->getTranslationDictionaryUrl()) ?>'], function (dict) {
            return JSON.parse(dict);
        });
    </script>
    <?php
}
?>

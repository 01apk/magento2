<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="StorefrontCustomerReorderProductWithCustomOptions">
        <annotations>
            <stories value="Reorder product with custom options"/>
            <title value="Make reorder as customer on frontend"/>
            <description value="Make reorder as customer on Frontend with simple product custom options"/>
            <severity value="CRITICAL"/>
            <testCaseId value=""/>
            <useCaseId value="MC-41981" />
            <group value="sales"/>
        </annotations>

        <before>
            <!-- Login As Admin            -->
            <actionGroup ref="AdminLoginActionGroup" stepKey="loginAsAdmin"/>

            <!-- Create Simple Category    -->
            <createData entity="_defaultCategory" stepKey="initialCategoryEntity"/>

            <!-- Create Simple Product     -->
            <createData entity="defaultSimpleProduct" stepKey="initialSimpleProduct"/>

        </before>

        <after>

            <deleteData stepKey="deleteDefaultCategory" createDataKey="initialCategoryEntity"/>
            <deleteData stepKey="deleteSimpleProduct" createDataKey="initialSimpleProduct"/>
            <actionGroup ref="AdminLogoutActionGroup" stepKey="logout"/>

        </after>

        <!-- Search default simple product in the grid -->
        <actionGroup ref="AdminClearFiltersActionGroup" stepKey="openProductCatalogPage"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="filterProductGrid"/>
        <actionGroup ref="OpenEditProductOnBackendActionGroup" stepKey="clickFirstRowToOpenDefaultSimpleProduct">
            <argument name="product" value="$$initialSimpleProduct$$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitUntilProductIsOpened"/>

        <!-- Create simple product with customizable option -->
        <conditionalClick selector="{{AdminProductCustomizableOptionsSection.customizableOptions}}" dependentSelector="{{AdminProductCustomizableOptionsSection.addOptionBtn}}" visible="false" stepKey="openCustomOptionSection"/>
        <click selector="{{AdminProductCustomizableOptionsSection.addOptionBtn}}" stepKey="clickAddOptionButton1"/>
        <waitForPageLoad stepKey="waitForDataToLoad"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.optionTitleInput('0')}}" userInput="{{simpleProductCustomizableOptionOne.title}}" stepKey="fillOptionTitle"/>
        <click selector="{{AdminProductCustomizableOptionsSection.optionTypeDropDown('1')}}" stepKey="selectOptionTypeDropDown"/>
        <click selector="{{AdminProductCustomizableOptionsSection.optionTypeItem('1', simpleProductCustomizableOptionOne.type)}}" stepKey="selectOptionFieldFromDropDown"/>
        <checkOption selector="{{AdminProductCustomizableOptionsSection.requiredCheckBox('0')}}" stepKey="checkRequiredCheckBox"/>
        <click selector="{{AdminProductCustomizableOptionsSection.addValue}}" stepKey="clickAddValueButton"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValueTitle(simpleProductCustomizableOptionOne.title,'0')}}" userInput="{{simpleProductCustomizableOptionOne.option_1_title}}" stepKey="fillOptionTitleForCustomizableOption"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValuePrice(simpleProductCustomizableOptionOne.title,'0')}}" userInput="{{simpleProductCustomizableOptionOne.option_1_price}}" stepKey="fillOptionPrice"/>
        <selectOption selector="{{AdminProductCustomizableOptionsSection.clickSelectPriceType(simpleProductCustomizableOptionOne.title,'0')}}" userInput="{{simpleProductCustomizableOptionOne.option_1_price_type}}" stepKey="selectOptionPriceType"/>

        <!-- Add Second File Options    -->
        <conditionalClick selector="{{AdminProductCustomizableOptionsSection.customizableOptions}}" dependentSelector="{{AdminProductCustomizableOptionsSection.addOptionBtn}}" visible="false" stepKey="openCustomOptionSection2"/>
        <click selector="{{AdminProductCustomizableOptionsSection.addOptionBtn}}" stepKey="clickAddOptionButton2"/>
        <waitForPageLoad stepKey="waitForDataToLoad2"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.optionTitleInput('1')}}" userInput="{{simpleProductCustomizableOptionTwo.title}}" stepKey="fillOptionTitle2"/>
        <click selector="{{AdminProductCustomizableOptionsSection.optionTypeDropDown('2')}}" stepKey="selectOptionTypeDropDown2"/>
        <click selector="{{AdminProductCustomizableOptionsSection.optionTypeItem('2', simpleProductCustomizableOptionTwo.type)}}" stepKey="selectOptionFieldFromDropDown2"/>
        <checkOption selector="{{AdminProductCustomizableOptionsSection.requiredCheckBox('1')}}" stepKey="checkRequiredCheckBox2"/>
        <click selector="{{AdminProductCustomizableOptionsSection.addValue}}" stepKey="clickAddValueButton2"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValuePrice(simpleProductCustomizableOptionTwo.title,'0')}}" userInput="{{simpleProductCustomizableOptionTwo.option_2_price}}" stepKey="fillOptionPrice2"/>
        <selectOption selector="{{AdminProductCustomizableOptionsSection.clickSelectPriceType(simpleProductCustomizableOptionTwo.title,'0')}}" userInput="{{simpleProductCustomizableOptionTwo.option_2_price_type}}" stepKey="selectOptionPriceType2"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValuePrice(simpleProductCustomizableOptionTwo.title,'0')}}" userInput="{{simpleProductCustomizableOptionTwo.option_2_file_extension}}" stepKey="fillOptionFileExtension2"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValuePrice(simpleProductCustomizableOptionTwo.title,'0')}}" userInput="{{simpleProductCustomizableOptionTwo.option_2_image_size_x}}" stepKey="fillOptionImageSizeX2"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValuePrice(simpleProductCustomizableOptionTwo.title,'0')}}" userInput="{{simpleProductCustomizableOptionTwo.option_2_image_size_y}}" stepKey="fillOptionImageSizeY"/>

        <!-- Add third Options        -->
        <conditionalClick selector="{{AdminProductCustomizableOptionsSection.customizableOptions}}" dependentSelector="{{AdminProductCustomizableOptionsSection.addOptionBtn}}" visible="false" stepKey="openCustomOptionSection3"/>
        <click selector="{{AdminProductCustomizableOptionsSection.addOptionBtn}}" stepKey="clickAddOptionButton3"/>
        <waitForPageLoad stepKey="waitForDataToLoad3"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.optionTitleInput('2')}}" userInput="{{simpleProductCustomizableOptionThree.title}}" stepKey="fillOptionTitle3"/>
        <click selector="{{AdminProductCustomizableOptionsSection.optionTypeDropDown('3')}}" stepKey="selectOptionTypeDropDown3"/>
        <click selector="{{AdminProductCustomizableOptionsSection.optionTypeItem('3', simpleProductCustomizableOptionThree.type)}}" stepKey="selectOptionFieldFromDropDown3"/>
        <checkOption selector="{{AdminProductCustomizableOptionsSection.requiredCheckBox('2')}}" stepKey="checkRequiredCheckBox3"/>
        <click selector="{{AdminProductCustomizableOptionsSection.addValue}}" stepKey="clickAddValueButton3"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValueTitle(simpleProductCustomizableOptionThree.title,'0')}}" userInput="{{simpleProductCustomizableOptionThree.option_3_title}}" stepKey="fillOptionTitleForCustomizableOption3"/>
        <fillField selector="{{AdminProductCustomizableOptionsSection.fillOptionValuePrice(simpleProductCustomizableOptionThree.title,'0')}}" userInput="{{simpleProductCustomizableOptionThree.option_3_price}}" stepKey="fillOptionPrice3"/>
        <selectOption selector="{{AdminProductCustomizableOptionsSection.clickSelectPriceType(simpleProductCustomizableOptionThree.title,'0')}}" userInput="{{simpleProductCustomizableOptionThree.option_3_price_type}}" stepKey="selectOptionPriceType3"/>


        <scrollToTopOfPage stepKey="scrollToTopOfAdminProductFormSection"/>
        <actionGroup ref="AdminProductFormSaveButtonClickActionGroup" stepKey="clickSaveButton"/>

        <!--Verify customer see success message-->
        <see selector="{{AdminProductFormSection.successMessage}}" userInput="You saved the product." stepKey="seeAssertSimpleProductSaveSuccessMessage"/>

    </test>
</tests>

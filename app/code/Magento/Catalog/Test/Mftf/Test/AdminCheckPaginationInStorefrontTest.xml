<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="AdminCheckPaginationInStorefrontTest">
        <annotations>
            <stories value="Create flat catalog product"/>
            <title value="Verify that pagination works when Flat Category is enabled"/>
            <description value="Login as admin, create flat catalog product and check pagination"/>
            <testCaseId value="MC-6051"/>
            <severity value="CRITICAL"/>
            <group value="mtf_migrated"/>
            <group value="Catalog"/>
            <group value="banana"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginToAdminPanel"/>
            <createData entity="_defaultCategory" stepKey="createDefaultCategory"/>
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct1" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct2" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct3" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct4" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct5" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct6" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct7" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct8" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct9" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct10" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct11" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct12" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct13" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct14" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct15" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct16" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct17" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct18" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct19" />
            <createData entity="defaultSimpleProduct" stepKey="simpleProduct20" />
        </before>
        <after>
            <amOnPage url="{{AdminCatalogSearchConfigurationPage.url}}" stepKey="getCatalogEditPage1"/>
            <waitForPageLoad stepKey="waitForPageToLoad"/>
            <click selector="{{CatalogSection.storefront}}" stepKey="clickOnStoreFront2"/>
            <scrollTo selector="{{CatalogSection.flatCatalogCategoryCheckBox}}" x="0" y="-80" stepKey="scrollToFlatCatalogCategory1"/>
            <checkOption selector="{{CatalogSection.flatCatalogCategoryCheckBox}}" stepKey="checkTheflatCategoryCheckBox"/>
            <selectOption selector="{{CatalogSection.flatCatalogProduct}}"  userInput="No" stepKey="selectFlatCatalogProduct1"/>
            <scrollToTopOfPage stepKey="scrollToTopOfThePage3"/>
            <click selector="{{CatalogSection.storefront}}" stepKey="clickOnStoreFront3"/>
            <click selector="{{CatalogSection.save}}" stepKey="clickOnSaveButton2"/>
            <see selector="{{CatalogSection.successMessage}}" userInput="You saved the configuration." stepKey="seeSuccessSaveMessage1"/>
            <deleteData createDataKey="createDefaultCategory" stepKey="deleteCategory"/>
            <deleteData  createDataKey="simpleProduct1" stepKey="deleteSimpleProduct1"/>
            <deleteData  createDataKey="simpleProduct2" stepKey="deleteSimpleProduct2"/>
            <deleteData  createDataKey="simpleProduct3" stepKey="deleteSimpleProduct3"/>
            <deleteData  createDataKey="simpleProduct4" stepKey="deleteSimpleProduct4"/>
            <deleteData  createDataKey="simpleProduct5" stepKey="deleteSimpleProduct5"/>
            <deleteData  createDataKey="simpleProduct6" stepKey="deleteSimpleProduct6"/>
            <deleteData  createDataKey="simpleProduct7" stepKey="deleteSimpleProduct7"/>
            <deleteData  createDataKey="simpleProduct8" stepKey="deleteSimpleProduct8"/>
            <deleteData  createDataKey="simpleProduct9" stepKey="deleteSimpleProduct9"/>
            <deleteData  createDataKey="simpleProduct10" stepKey="deleteSimpleProduct10"/>
            <deleteData  createDataKey="simpleProduct11" stepKey="deleteSimpleProduct11"/>
            <deleteData  createDataKey="simpleProduct12" stepKey="deleteSimpleProduct12"/>
            <deleteData  createDataKey="simpleProduct13" stepKey="deleteSimpleProduct13"/>
            <deleteData  createDataKey="simpleProduct14" stepKey="deleteSimpleProduct14"/>
            <deleteData  createDataKey="simpleProduct15" stepKey="deleteSimpleProduct15"/>
            <deleteData  createDataKey="simpleProduct16" stepKey="deleteSimpleProduct16"/>
            <deleteData  createDataKey="simpleProduct17" stepKey="deleteSimpleProduct17"/>
            <deleteData  createDataKey="simpleProduct18" stepKey="deleteSimpleProduct18"/>
            <deleteData  createDataKey="simpleProduct19" stepKey="deleteSimpleProduct19"/>
            <deleteData  createDataKey="simpleProduct20" stepKey="deleteSimpleProduct20"/>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <!--Select Catalog Configuration Page-->
        <amOnPage url="{{AdminCatalogSearchConfigurationPage.url}}" stepKey="getCatalogEditPage"/>
        <waitForPageLoad stepKey="waitForPageToLoad"/>
        <click selector="{{CatalogSection.storefront}}" stepKey="clickOnStoreFront"/>
        <scrollTo selector="{{CatalogSection.flatCatalogCategoryCheckBox}}" x="0" y="-80" stepKey="scrollToFlatCatalogCategory"/>
        <uncheckOption selector="{{CatalogSection.flatCatalogCategoryCheckBox}}" stepKey="uncheckTheflatCategoryCheckBox"/>
        <selectOption selector="{{CatalogSection.flatCatalogCategory}}"  userInput="Yes" stepKey="selectFlatCatalogCategory"/>
        <selectOption selector="{{CatalogSection.flatCatalogProduct}}"  userInput="Yes" stepKey="selectFlatCatalogProduct"/>
        <scrollToTopOfPage stepKey="scrollToTopOfThePage"/>
        <click selector="{{CatalogSection.storefront}}" stepKey="clickOnStoreFront1"/>
        <!--Save the updated catalog -->
        <click selector="{{CatalogSection.save}}" stepKey="clickOnSaveButton"/>
        <waitForPageLoad stepKey="waitForPageToSave"/>
        <see selector="{{CatalogSection.successMessage}}" userInput="You saved the configuration." stepKey="seeSuccessSaveMessage"/>
        <!-- Select Created Category-->
        <amOnPage url="{{AdminCategoryPage.url}}" stepKey="openAdminCategoryIndexPage"/>
        <waitForPageLoad stepKey="waitForPageToLoad1"/>
        <click selector="{{AdminCategorySidebarTreeSection.expandAll}}" stepKey="clickOnExpandTree"/>
        <click selector="{{AdminCategorySidebarTreeSection.categoryInTree(_defaultCategory.name)}}" stepKey="selectCreatedCategory"/>
        <waitForPageLoad stepKey="waitForPageToLoaded2"/>
        <!--Select Products in Category and save-->
        <scrollTo selector="{{AdminCategoryBasicFieldSection.productsInCategory}}" x="0" y="-80" stepKey="scrollToProductInCategory"/>
        <click selector="{{AdminCategoryBasicFieldSection.productsInCategory}}" stepKey="clickOnProductInCategory"/>
        <scrollTo selector="{{CatalogProductsSection.resetFilter}}" stepKey="scrollToResetFilter"/>
        <click selector="{{CatalogProductsSection.resetFilter}}" stepKey="clickOnResetFilter"/>
        <waitForPageLoad stepKey="waitForPageToLoad3"/>
        <click selector="{{AdminCategoryProductsGridSection.productSelectAll}}" stepKey="selectSelectAll"/>
        <click selector="{{AdminCategoryMainActionsSection.SaveButton}}" stepKey="clickSaveButton"/>
        <waitForPageLoad stepKey="waitForCategorySaved"/>
        <see selector="{{AdminCategoryMessagesSection.SuccessMessage}}" userInput="You saved the category." stepKey="assertSuccessMessage"/>
        <waitForPageLoad stepKey="waitForPageTitleToBeSaved"/>
        <!--Go to the Store Front-->
        <amOnPage url="{{_defaultCategory.name}}.html" stepKey="goToStorefront"/>
        <waitForPageLoad stepKey="waitForCategoryPageToLoad"/>
        <seeElement selector="{{StorefrontHeaderSection.NavigationCategoryByName(_defaultCategory.name)}}" stepKey="seeCategoryOnNavigation"/>
        <click selector="{{StorefrontHeaderSection.NavigationCategoryByName(_defaultCategory.name)}}" stepKey="selectCategory"/>
        <waitForPageLoad stepKey="waitForProductToLoad"/>
        <conditionalClick selector="{{StorefrontCategoryTopToolbarSection.gridMode}}" visible="true" dependentSelector="{{StorefrontCategoryTopToolbarSection.gridMode}}" stepKey="seeProductGridIsActive"/>
        <!--Verify products in First Page -->
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="9" stepKey="seeNumberOfProductsInFirstPage"/>
        <!--Verify products Second Page -->
        <scrollTo  selector="{{StorefrontCategoryBottomToolbarSection.nextPage}}" stepKey="scrollToNextButton"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.nextPage}}" stepKey="clickOnNextPage"/>
        <waitForPageLoad stepKey="waitForPageToLoad4"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="9" stepKey="seeNumberOfProductsInSecondPage"/>
        <!--Verify products third  Page -->
        <scrollTo  selector="{{StorefrontCategoryBottomToolbarSection.nextPage}}" stepKey="scrollToNextButton1"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.nextPage}}" stepKey="clickOnNextPage1"/>
        <waitForPageLoad stepKey="waitForPageToLoad2"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="2" stepKey="seeNumberOfProductsInThirdPage"/>
        <!--Verify products, use Previous Page selector-->
        <scrollTo selector="{{StorefrontCategoryBottomToolbarSection.previousPage}}" stepKey="scrollToPreviousPage"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.previousPage}}" stepKey="clickOnPreviousPage1"/>
        <waitForPageLoad stepKey="waitForPageToLoad5"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="9" stepKey="seeNumberOfProductsInSecondPage1"/>
        <!--Verify Products, use Previous Page selector-->
        <scrollTo selector="{{StorefrontCategoryBottomToolbarSection.previousPage}}" stepKey="scrollToPreviousPage1"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.previousPage}}" stepKey="clickOnPreviousPage2"/>
        <waitForPageLoad stepKey="waitForPageToLoad6"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="9" stepKey="seeNumberOfProductsInFirstPage1"/>
        <!--Select Pages by using page Number and verify products-->
        <scrollTo selector="{{StorefrontCategoryBottomToolbarSection.nextPage}}" stepKey="scrollToPreviousPage2"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.pageNumber('2')}}" stepKey="clickOnPage2"/>
        <waitForPageLoad stepKey="waitForPageToLoad7"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="9" stepKey="seeNumberOfProductsInSecondPage2"/>
        <!--Select Third Page using page number-->
        <scrollTo selector="{{StorefrontCategoryBottomToolbarSection.nextPage}}" stepKey="scrollToPreviousPage3"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.pageNumber('3')}}" stepKey="clickOnThirdPage"/>
        <waitForPageLoad stepKey="waitForPageToLoad8"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="2" stepKey="seeNumberOfProductsInThirdPage2"/>
        <!--Select First Page using page number-->
        <scrollTo selector="{{StorefrontCategoryBottomToolbarSection.previousPage}}" stepKey="scrollToPreviousPage4"/>
        <click selector="{{StorefrontCategoryBottomToolbarSection.pageNumber('1')}}" stepKey="clickOnFirstPage"/>
        <waitForPageLoad stepKey="waitForPageToLoad9"/>
        <seeNumberOfElements selector="{{StorefrontCategoryMainSection.productLink}}" userInput="9" stepKey="seeNumberOfProductsFirstPage2"/>
    </test>
</tests>
